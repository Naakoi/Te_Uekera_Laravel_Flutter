import{r as v,G as N,j as e,S as w,A as C}from"./app-DfZg0_iv.js";import{A}from"./AuthenticatedLayout-BJo3BYVB.js";import"./ApplicationLogo-DupAcbHH.js";import"./transition-UVFmWLJ4.js";function z({auth:x,codes:a,documents:p}){const[n,l]=v.useState([]),{data:c,setData:d,post:m,processing:o,errors:r,reset:h}=N({count:10,document_id:"",duration_type:"permanent"}),u=t=>{if(!t)return"N/A";const[s,i]=t.split("@");return s.length<=2?s+"***@"+i:s.substring(0,2)+"*".repeat(s.length-2)+"@"+i},g=t=>{t.preventDefault(),m(route("admin.redeem_codes.generate"),{onSuccess:()=>h()})},b=t=>{confirm("Are you sure you want to delete this code?")&&C.delete(route("admin.redeem_codes.delete",t))},f=t=>{l(s=>s.includes(t)?s.filter(i=>i!==t):[...s,t])},j=()=>{n.length===a.data.length?l([]):l(a.data.map(t=>t.id))},y=()=>{window.print()},k=a.data.filter(t=>n.includes(t.id));return e.jsxs(A,{user:x.user,header:e.jsx("h2",{className:"font-black text-3xl text-gray-800 leading-tight uppercase tracking-tighter",children:"Activation Codes"}),children:[e.jsx(w,{title:"Redeem Codes Management"}),e.jsx("style",{children:`
                @media screen {
                    .print-only { display: none; }
                }
                @media print {
                    @page { size: portrait; margin: 1cm; }
                    .screen-only { display: none !important; }
                    .print-only { 
                        display: block !important; 
                        background: white !important;
                        position: absolute !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100% !important;
                        z-index: 9999 !important;
                    }
                    .voucher-grid {
                        display: grid !important;
                        grid-template-columns: repeat(2, 1fr) !important;
                        gap: 20px !important;
                        width: 100% !important;
                    }
                }
            `}),e.jsx("div",{className:"py-12 bg-[#f4f1ea] min-h-screen screen-only",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-md overflow-hidden shadow-2xl sm:rounded-[2rem] border border-black/5 p-8",children:[e.jsx("h3",{className:"text-xl font-black uppercase tracking-widest mb-6 text-[#be1e2d]",children:"Generate New Codes"}),e.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-gray-500 mb-2",children:"Number of Codes"}),e.jsx("input",{type:"number",value:c.count,onChange:t=>d("count",t.target.value),className:"w-full bg-[#f4f1ea] border-none rounded-xl focus:ring-2 focus:ring-[#be1e2d] font-bold text-lg p-4",min:"1",max:"100"}),r.count&&e.jsx("div",{className:"text-red-600 text-xs mt-1 font-bold italic",children:r.count})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-gray-500 mb-2",children:"Duration"}),e.jsxs("select",{value:c.duration_type,onChange:t=>d("duration_type",t.target.value),className:"w-full bg-[#f4f1ea] border-none rounded-xl focus:ring-2 focus:ring-[#be1e2d] font-bold text-lg p-4",children:[e.jsx("option",{value:"permanent",children:"Access: Permanent"}),e.jsx("option",{value:"weekly",children:"Access: 1 Week"}),e.jsx("option",{value:"monthly",children:"Access: 1 Month"})]}),r.duration_type&&e.jsx("div",{className:"text-red-600 text-xs mt-1 font-bold italic",children:r.duration_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-gray-500 mb-2",children:"Scope (Optional Document)"}),e.jsxs("select",{value:c.document_id,onChange:t=>d("document_id",t.target.value),className:"w-full bg-[#f4f1ea] border-none rounded-xl focus:ring-2 focus:ring-[#be1e2d] font-bold text-lg p-4",children:[e.jsx("option",{value:"",children:"Full Device Activation (All Access)"}),p.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))]}),r.document_id&&e.jsx("div",{className:"text-red-600 text-xs mt-1 font-bold italic",children:r.document_id})]}),e.jsx("button",{type:"submit",disabled:o,className:"px-10 py-5 bg-[#be1e2d] text-white font-black rounded-xl hover:bg-black transition-all shadow-xl shadow-red-500/20 active:scale-95 disabled:opacity-50 uppercase tracking-widest text-sm h-[60px]",children:o?"Generating...":"Generate Codes"})]})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-md overflow-hidden shadow-2xl sm:rounded-[3rem] border border-black/5",children:e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-black uppercase tracking-tighter italic text-gray-400",children:"Inventory"}),n.length>0&&e.jsxs("button",{onClick:y,className:"px-6 py-3 bg-[#1a1a1a] text-[#ffde00] font-black rounded-xl hover:bg-[#be1e2d] hover:text-white transition-all shadow-xl active:scale-95 uppercase tracking-widest text-xs flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print ",n.length," Vouchers"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-black/5",children:[e.jsx("th",{className:"py-4 px-4 w-10",children:e.jsx("input",{type:"checkbox",checked:n.length===a.data.length&&a.data.length>0,onChange:j,className:"rounded border-gray-300 text-[#be1e2d] focus:ring-[#be1e2d]"})}),e.jsx("th",{className:"py-4 px-4 text-xs font-black uppercase tracking-widest text-gray-400",children:"Code"}),e.jsx("th",{className:"py-4 px-4 text-xs font-black uppercase tracking-widest text-gray-400",children:"Duration"}),e.jsx("th",{className:"py-4 px-4 text-xs font-black uppercase tracking-widest text-gray-400",children:"Target Type"}),e.jsx("th",{className:"py-4 px-4 text-xs font-black uppercase tracking-widest text-gray-400",children:"Status"}),e.jsx("th",{className:"py-4 px-4 text-xs font-black uppercase tracking-widest text-gray-400",children:"Details"}),e.jsx("th",{className:"py-4 px-4 text-xs font-black uppercase tracking-widest text-gray-400",children:"Creator"}),e.jsx("th",{className:"py-4 px-4 text-xs font-black uppercase tracking-widest text-gray-400 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-black/5",children:a.data.map(t=>e.jsxs("tr",{className:"group hover:bg-[#be1e2d]/5 transition-colors",children:[e.jsx("td",{className:"py-5 px-4 w-10",children:e.jsx("input",{type:"checkbox",checked:n.includes(t.id),onChange:()=>f(t.id),className:"rounded border-gray-300 text-[#be1e2d] focus:ring-[#be1e2d]"})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("span",{className:"font-mono font-black text-lg bg-[#f4f1ea] px-3 py-1 rounded-lg border border-black/5 shadow-sm group-hover:bg-[#be1e2d] group-hover:text-white transition-colors uppercase",children:t.code})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest px-2 py-1 rounded ${t.duration_type==="permanent"?"bg-indigo-50 text-indigo-600":t.duration_type==="weekly"?"bg-amber-50 text-amber-600":"bg-purple-50 text-purple-600"}`,children:t.duration_type})}),e.jsx("td",{className:"py-5 px-4",children:t.document?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[#be1e2d]",children:"Per Document"}),e.jsxs("span",{className:"text-xs font-bold text-gray-600 italic truncate max-w-[120px]",children:['"',t.document.title,'"']})]}):e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Full Device"})}),e.jsx("td",{className:"py-5 px-4 text-sm",children:t.is_used?e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 font-black uppercase text-[10px] rounded-full tracking-widest",children:"Used"}):e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 font-black uppercase text-[10px] rounded-full tracking-widest",children:"Available"})}),e.jsx("td",{className:"py-5 px-4",children:t.is_used?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Device:"}),e.jsx("span",{className:"text-[9px] font-mono text-gray-500 truncate max-w-[80px]",children:t.device_id})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Expires:"}),e.jsx("span",{className:"text-[9px] font-bold text-[#be1e2d] italic",children:t.expires_at?new Date(t.expires_at).toLocaleDateString():"Never"})]})]}):e.jsx("span",{className:"text-gray-300 italic text-[10px]",children:"No usage recorded"})}),e.jsx("td",{className:"py-5 px-4",children:e.jsx("span",{className:"text-[10px] font-bold text-gray-500 font-mono",children:t.creator?u(t.creator.email):"System"})}),e.jsx("td",{className:"py-5 px-4 text-right",children:e.jsx("button",{onClick:()=>b(t.id),className:"p-2 text-gray-300 hover:text-red-600 transition-colors",title:"Delete Code",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},t.id))})]})})]})})]})}),e.jsx("div",{className:"print-only",children:e.jsx("div",{className:"voucher-grid",children:k.map(t=>e.jsxs("div",{style:{border:"2px dashed black",padding:"20px",borderRadius:"15px",backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",minHeight:"300px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",borderBottom:"1px solid black",paddingBottom:"10px"},children:[e.jsx("span",{style:{fontWeight:"900",fontSize:"12px"},children:"TE UEKERA"}),e.jsxs("span",{style:{fontWeight:"900",fontSize:"10px"},children:[t.duration_type.toUpperCase()," ACCESS"]})]}),e.jsxs("div",{style:{margin:"30px 0"},children:[e.jsx("p",{style:{fontSize:"10px",textTransform:"uppercase",color:"#666",marginBottom:"5px"},children:"Your Activation Code"}),e.jsx("div",{style:{fontSize:"36px",fontFamily:"monospace",fontWeight:"900",letterSpacing:"2px",border:"2px solid black",padding:"15px",backgroundColor:"#f9f9f9"},children:t.code})]}),e.jsx("div",{style:{fontSize:"10px",fontWeight:"bold",marginBottom:"20px"},children:t.document?`Valid only for: ${t.document.title}`:"Valid for all editions (Full Access)"}),e.jsxs("div",{style:{backgroundColor:"#000",color:"#fff",padding:"15px",borderRadius:"8px",width:"100%"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"900",marginBottom:"5px"},children:"HOW TO REDEEM"}),e.jsxs("p",{style:{fontSize:"8px",lineHeight:"1.4"},children:["1. Visit teuekera.com",e.jsx("br",{}),'2. Click "Unlock This Edition" (bottom-right)',e.jsx("br",{}),"3. Enter your code and enjoy!"]})]})]},t.id))})})]})}export{z as default};
