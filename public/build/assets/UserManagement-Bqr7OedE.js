import{r as l,G as _,A as M,j as e,S as C}from"./app-DfZg0_iv.js";import{A as R}from"./AuthenticatedLayout-BJo3BYVB.js";import{M as A,S as E}from"./SecondaryButton-HaEMnZal.js";import{I as b}from"./InputLabel-0T4nlTfE.js";import{T as c}from"./TextInput-CSi711_D.js";import{I as w}from"./InputError-5LtKlnFb.js";import{P as I}from"./PrimaryButton-Cztdpm6N.js";import"./ApplicationLogo-DupAcbHH.js";import"./transition-UVFmWLJ4.js";import"./dialog-Z_ThJEEC.js";function W({auth:f,users:t,filters:n}){const[o,d]=l.useState(null),[g,x]=l.useState(!1),[a,m]=l.useState(n.search||""),{data:p,setData:h,post:j,processing:v,errors:u,reset:k}=_({password:"",password_confirmation:""}),N=s=>{d(s),x(!0)},i=()=>{x(!1),d(null),k()},y=s=>{s.preventDefault(),j(route("staff.users.reset-password",o.id),{onSuccess:()=>i()})},r=l.useRef(null);return l.useEffect(()=>(r.current&&clearTimeout(r.current),a!==(n.search||"")&&(r.current=setTimeout(()=>{M.get(route("staff.users.index"),{search:a},{preserveState:!0,replace:!0})},300)),()=>{r.current&&clearTimeout(r.current)}),[a,n.search]),e.jsxs(R,{user:f.user,header:"User Management",children:[e.jsx(C,{title:"User Management"}),e.jsx("div",{className:"pb-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white/70 backdrop-blur-2xl border border-white/40 shadow-[0_32px_64px_-15px_rgba(0,0,0,0.1)] rounded-[3rem] overflow-hidden",children:e.jsxs("div",{className:"p-10 md:p-16 text-gray-900",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-8 pb-10 border-b border-black/5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"inline-block bg-[#be1e2d] text-white px-5 py-1 text-[10px] font-black uppercase tracking-[0.2em] mb-4 rounded-full shadow-lg shadow-red-500/20",children:"Staff Access Only"}),e.jsx("h3",{className:"text-5xl font-black text-[#1a1a1a] uppercase tracking-tighter italic font-display",children:"Registered Readers"}),e.jsxs("div",{className:"text-xs font-black uppercase tracking-[0.2em] text-[#1e3a8a] opacity-50 mt-2",children:["Total Enrollment: ",e.jsx("span",{className:"text-[#be1e2d]",children:t.total})]})]}),e.jsxs("div",{className:"w-full md:w-96 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-[#be1e2d]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx(c,{className:"pl-14 w-full border-none rounded-2xl h-16 font-bold placeholder:text-black/20 bg-black/5 focus:bg-white focus:ring-4 focus:ring-[#be1e2d]/5 shadow-inner transition-all",placeholder:"Search by name or email...",value:a,onChange:s=>m(s.target.value)}),a&&e.jsx("button",{onClick:()=>m(""),className:"absolute inset-y-0 right-0 pr-5 flex items-center text-black/20 hover:text-[#be1e2d]",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("div",{className:"overflow-hidden rounded-3xl border border-black/5 shadow-inner bg-white/50",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#1a1a1a] text-white",children:[e.jsx("th",{className:"px-8 py-6 font-black uppercase text-[10px] tracking-[0.3em]",children:"Name"}),e.jsx("th",{className:"px-8 py-6 font-black uppercase text-[10px] tracking-[0.3em]",children:"Email Address"}),e.jsx("th",{className:"px-8 py-6 font-black uppercase text-[10px] tracking-[0.3em]",children:"Enrollment"}),e.jsx("th",{className:"px-8 py-6 font-black uppercase text-[10px] tracking-[0.3em] text-right",children:"Administrative"})]})}),e.jsx("tbody",{className:"divide-y divide-black/5 font-serif",children:t.data.map(s=>e.jsxs("tr",{className:"hover:bg-white transition-colors group",children:[e.jsx("td",{className:"px-8 py-6 whitespace-nowrap font-black uppercase tracking-tight text-[#1e3a8a] text-lg",children:s.name}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap text-gray-800 font-medium italic",children:s.email}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap text-xs font-black uppercase tracking-widest text-black/30",children:s.created_at}),e.jsx("td",{className:"px-8 py-6 whitespace-nowrap text-right",children:e.jsx("button",{onClick:()=>N(s),className:"inline-flex items-center px-6 py-2.5 bg-white border border-black/10 text-[10px] font-black uppercase tracking-[0.2em] rounded-xl hover:bg-[#be1e2d] hover:text-white hover:border-[#be1e2d] hover:shadow-lg hover:shadow-red-500/20 transition-all active:scale-95",children:"Reset Key"})})]},s.id))})]})}),t.links&&t.links.length>3&&e.jsx("div",{className:"mt-16 flex justify-center items-center gap-3",children:t.links.map((s,S)=>e.jsx("button",{disabled:!s.url,className:`h-12 flex items-center justify-center px-6 rounded-2xl font-black uppercase text-[10px] tracking-widest transition-all ${s.active?"bg-[#be1e2d] text-white shadow-xl shadow-red-500/30":"bg-white text-black/40 hover:text-black hover:bg-white shadow-md hover:shadow-xl"} ${s.url?"":"opacity-20 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label},onClick:()=>window.location.href=s.url},S))})]})})})}),e.jsx(A,{show:g,onClose:i,children:e.jsxs("form",{onSubmit:y,className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-[#1e3a8a] mb-4",children:["Reset Password for ",o==null?void 0:o.name]}),e.jsx("p",{className:"mb-6 text-sm text-gray-600 dark:text-gray-400 italic border-l-4 border-[#be1e2d] pl-4",children:"Provide a new password for the user. You will need to share this password with them manually."}),e.jsxs("div",{className:"mt-4",children:[e.jsx(b,{htmlFor:"password",value:"New Password"}),e.jsx(c,{id:"password",type:"password",name:"password",value:p.password,className:"mt-1 block w-full",onChange:s=>h("password",s.target.value),required:!0}),e.jsx(w,{message:u.password,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(b,{htmlFor:"password_confirmation",value:"Confirm New Password"}),e.jsx(c,{id:"password_confirmation",type:"password",name:"password_confirmation",value:p.password_confirmation,className:"mt-1 block w-full",onChange:s=>h("password_confirmation",s.target.value),required:!0}),e.jsx(w,{message:u.password_confirmation,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(E,{onClick:i,children:"Cancel"}),e.jsx(I,{className:"bg-[#be1e2d] hover:bg-red-700",disabled:v,children:"Reset Password"})]})]})})]})}export{W as default};
